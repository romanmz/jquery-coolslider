// coolslider v2.1 - http://github.com/romanmz/coolslider
!function(t,e,i){function s(){var t,s=document.createElement("p"),n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(s,null);for(var o in n)s.style[o]!==i&&(s.style[o]="translate3d(1px,1px,1px)",t=e.getComputedStyle(s).getPropertyValue(n[o]));return document.body.removeChild(s),t!==i&&t.length>0&&"none"!==t}function n(){var t=document.createElement("p").style,e="transition"in t||"WebkitTransition"in t||"MozTransition"in t||"msTransition"in t||"OTransition"in t;return e}var o="coolslider",a=o+"Backup",r=o+"Classname",l={type:"scroll",swipe:!0,slides:"> *",timer:8e3,speed:500,showFirst:1,loop:!1,autoplay:!1,keyboard:!0,fixHeight:!1,classSelected:"selected",classAutoplaying:"autoplaying",classTransitioning:"transitioning",classDisabled:"disabled",prev:"",next:"",play:"",stop:"",links:"",linksTitle:"",current:"",total:""};e[o]=function(e,i){"string"==typeof e||e instanceof HTMLElement||e instanceof HTMLCollection||e instanceof jQuery||(e=null),t(e).data(o)&&t(e).data(o).destroy(),this.slider=t(e).data(o,this),"object"==typeof i&&this.init(i)},t.fn[o]=function(e){return"undefined"==typeof e&&(e=null),this.each(function(){t(this).data(o)||new coolslider(this,e)})},t.fn[o].defaults=l,t(document).ready(function(){t(".auto-"+o)[o]()}),coolslider.prototype={init:function(a){if("undefined"==typeof this.slider.data(o)&&this.slider.data(o,this),this.data||this!==this.slider.data(o))return this;var r=this,d=r.slider;a=r.settings=t.extend({},t.fn[o].defaults,a,d.data(o.toLowerCase()+"Options"));var c=r.slides=d.find(a.slides);if(c.length<2)return this;r.wrapper=t();var u=r.data={total:c.length,selected:i,previous:i,loopDirection:0,isMoving:!1,isPlaying:a.autoplay,timerChange:!1,timerTransition:!1,timerFixHeight:!1,speed:a.speed,isTouch:a.swipe&&("ontouchstart"in e||navigator.msMaxTouchPoints>0),hasTransforms3D:"undefined"!=typeof Modernizr&&Modernizr.csstransforms3d||s(),hasTransitions:"undefined"!=typeof Modernizr&&Modernizr.csstransitions||n()},h=u.isTouch&&a.swipe!==!0?a.swipe:a.type;return"string"==typeof h&&"function"==typeof t.fn[o].effects[h]?h=t.fn[o].effects[h]:"function"!=typeof h&&(h=t.fn[o].effects[l.type]),r._initEvents(),r._initTouchEvents(),r._initControls(),h.call(r,d,c,a,u),d.trigger("init"),r.goTo("random"==a.showFirst?Math.floor(Math.random()*u.total):a.showFirst-1,0),this},destroy:function(){if(this!==this.slider.data(o))return this;var i=this,s=i.settings,n=i.data,l=i.slider,d=i.slides,c=i.controls;return l.trigger("destroy").off("touchstart."+o+" touchmove."+o+" touchend."+o+" slidestart."+o+" slideend."+o+" init."+o+" destroy."+o).removeData(o),s&&l.removeClass(s.classTransitioning+" "+s.classAutoplaying),i.wrapper&&i.wrapper.data(a)&&d.unwrap(),d&&d.height("").each(function(){t(this).removeClass(t(this).data(r)).removeData(r)}),c&&(c.prev.removeClass(s.classDisabled).off("click."+o),c.next.removeClass(s.classDisabled).off("click."+o),c.play.removeClass(s.classAutoplaying).off("click."+o),c.stop.removeClass(s.classAutoplaying).off("click."+o),c.current.html(c.current.data(a)).removeData(a),c.total.html(c.total.data(a)).removeData(a),c.links.each(function(){var e=t(this);e.data(a)===!0?e.remove():e.find(s.linksTitle).html(e.data(a)),e.removeClass(e.data(r)).removeData(a+" "+r)}).off("click."+o)),n&&(clearTimeout(n.timerTransition),clearTimeout(n.timerChange),clearTimeout(n.timerFixHeight)),t(document).off("keydown."+o),t(e).off("load."+o+" resize."+o),delete this.wrapper,delete this.slides,delete this.controls,delete this.data,delete this.touchData,this},_initEvents:function(){function i(){if(s.data){var e=0;r.height("").each(function(){e=Math.max(e,t(this).height())}).height(e),a.timerFixHeight=setTimeout(i,1e3)}}var s=this,n=s.settings,a=s.data,r=(s.slider,s.slides);return n.keyboard&&t(document).on("keydown."+o,function(t){var e=t.which;37==e?s.previous():39==e&&s.next()}),n.fixHeight&&(i(),t(e).on("load."+o+" resize."+o,i),"function"==typeof t.fn.imagesLoaded&&r.imagesLoaded().progress(i)),this},_initTouchEvents:function(){if(this.touchData||this!==this.slider.data(o))return this;var t=this,e=(t.settings,t.data,t.slider),i=(t.slides,t.touchData={});return this.data.isTouch?(e.on("touchstart."+o,function(t){var s=t.originalEvent.touches[0];i.startX=s.pageX,i.startY=s.pageY,i.startTime=+new Date,i.areaWidth=e.innerWidth(),i.areaHeight=e.innerHeight(),i.deltaX=0,i.deltaY=0,i.ratioX=0,i.ratioY=0,i.directionX=0,i.directionY=0,i.direction="",i.swipedX=!1,i.swipedY=!1}).on("touchmove."+o,function(t){t=t.originalEvent,t.touches.length>1||t.scale&&1!==t.scale||(i.deltaX=t.touches[0].pageX-i.startX,i.deltaY=t.touches[0].pageY-i.startY,i.ratioX=i.deltaX/i.areaWidth,i.ratioY=i.deltaY/i.areaHeight,i.directionX=i.deltaX<0?1:-1,i.directionY=i.deltaY<0?1:-1,i.direction||(i.direction=Math.abs(i.deltaY)>Math.abs(i.deltaX)?"y":"x"))}).on("touchend."+o,function(){var t=+new Date-i.startTime<250;if("x"==i.direction){var e=Math.abs(i.deltaX)>20,s=Math.abs(i.ratioX)>.5;i.swipedX=s||t&&e}else{var e=Math.abs(i.deltaY)>20,s=Math.abs(i.ratioY)>.5;i.swipedY=s||t&&e}}),this):this},_initControls:function(){if(this.controls||this!==this.slider.data(o))return this;var e=this,i=e.settings,s=e.data,n=e.slider,r=e.slides,l=e.controls=t();l.prev=t(i.prev),l.next=t(i.next),l.play=t(i.play),l.stop=t(i.stop),l.current=t(i.current),l.total=t(i.total),l.links=t(i.links),s.isPlaying&&(l.play.addClass(i.classAutoplaying),l.stop.addClass(i.classAutoplaying)),l.current.data(a,l.current.html()),l.total.data(a,l.total.html());for(var d=0;d<s.total;d++){var c=l.links.eq(d);c.length?c.data(a,c.find(i.linksTitle).html()):(c=l.links.last().clone().insertAfter(l.links.last()).removeData("slide-title"),l.links=l.links.add(c),c.data(a,!0));var u=r.eq(d).data("slide-title");u||(u=d+1),c.find(i.linksTitle).text(u)}return n.on("slidestart."+o,function(){e.updateControls()}),l.prev.on("click."+o,function(t){e.previous(),t.preventDefault()}),l.next.on("click."+o,function(t){e.next(),t.preventDefault()}),l.play.on("click."+o,function(t){e.play(),t.preventDefault()}),l.stop.on("click."+o,function(t){e.stop(),t.preventDefault()}),l.links.on("click."+o,function(i){s.loopDirection=0,e.goTo(l.links.index(t(this))),i.preventDefault()}),this},updateControls:function(){var t=this,e=t.settings,i=t.data,s=t.slider,n=t.controls,o=e.loop||i.selected>0?"removeClass":"addClass";n.prev[o](e.classDisabled);var a=e.loop||i.selected<i.total-1?"removeClass":"addClass";n.next[a](e.classDisabled);var r=i.isPlaying?"addClass":"removeClass";return n.play[r](e.classAutoplaying),n.stop[r](e.classAutoplaying),s[r](e.classAutoplaying),t._updateClasses(n.links),n.current.text(i.selected+1),n.total.text(i.total),this},_limitRange:function(t){var e=this.data.total-1,i=this.settings.loop;return t>e?i?0:e:0>t?i?e:0:t},_getWrapper:function(){if(!this.wrapper.length){var e=this.slides.parent();if(e.is(this.slider)||e.length>1){var i=t("<div>").data(a,!0);this.slides.wrapAll(i)}this.wrapper=this.slides.parent()}return this.wrapper},_updateClasses:function(e,i){var s=this;return"undefined"==typeof i&&(i=0),e.each(function(e){var n=s.data.selected+i;if(e-n==0)var o=s.settings.classSelected;else var o="not-"+s.settings.classSelected+" "+s.settings.classSelected+(e-n);t(this).removeClass(t(this).data(r)).addClass(o).data(r,o)}),this},goTo:function(t,e,s){{var n=this,o=n.settings,a=n.data,r=n.slider,l=n.slides;n.controls}return"undefined"==typeof e&&(e=o.speed),"undefined"==typeof s&&(s=!1),t=n._limitRange(t),s||!a.isMoving&&t!=a.selected?(a.isMoving=!0,a.previous=a.selected>=0&&a.selected!=t?a.selected:i,a.selected=t,a.speed=e,0==a.loopDirection&&(a.loopDirection=a.selected-a.previous>0?1:-1),clearTimeout(a.timerChange),clearTimeout(a.timerTransition),n._updateClasses(l),r.addClass(o.classTransitioning),r.trigger("slidestart"),a.timerTransition=setTimeout(function(){a.isMoving=!1,a.isPlaying&&n.play(),r.removeClass(o.classTransitioning),r.trigger("slideend")},a.speed),this):this},previous:function(){return this.data.loopDirection=-1,this.goTo(this.data.selected-1),this},next:function(){return this.data.loopDirection=1,this.goTo(this.data.selected+1),this},stop:function(){return this.data.isPlaying=!1,this.updateControls(),this.goTo(this.data.selected,0,!0),this},play:function(){var t=this,e=t.data;return e.isPlaying=!0,t.updateControls(),clearTimeout(e.timerChange),e.timerChange=setTimeout(function(){var i=e.selected+1>e.total-1?0:e.selected+1;e.loopDirection=1,t.goTo(i)},t.settings.timer),this}},t.fn[o].effects={css:function(){},tabs:function(t,e,i,s){t.on("slidestart."+o,function(){e.hide().eq(s.selected).show()}).on("destroy."+o,function(){e.css({display:""})})},fade:function(e,i,s,n){function a(t,e,s,n){i.stop(!0,!0),t.not(e).length&&(0==n?(t.css({opacity:s}),e.not(t).css({opacity:1-s})):(t.fadeTo(n,s),r=setTimeout(function(){e.not(t).fadeTo(n/2,1-s)},n/2)))}var r,l=this,d=l.touchData,c=l._getWrapper(),u=100/n.total;e.css({overflow:"hidden"}),c.css({position:"relative",left:0,top:0,width:100*n.total+"%"}),i.css({position:"relative","float":"left",width:u+"%",zIndex:0,opacity:0,visibility:"hidden"}).each(function(e){t(this).css({left:u*-e+"%"})}),e.on("slidestart."+o,function(){var t=i.eq(n.selected);t.css({visibility:"visible",zIndex:1}),a(t,i.eq(n.previous),1,n.speed)}).on("slideend."+o,function(){var t=i.eq(n.selected);t.css({zIndex:0}),i.not(t).css({zIndex:0,visibility:"hidden",opacity:0})}),n.isTouch&&e.on("touchstart."+o,function(){l.stop()}).on("touchmove."+o,function(t){if(t=t.originalEvent,"x"==d.direction){var e=i.eq(n.selected),s=i.eq(l._limitRange(n.selected+d.directionX)),o=1-d.ratioX*-d.directionX;s.css({visibility:"visible",zIndex:1}),a(e,s,o,0),t.preventDefault()}}).on("touchend."+o,function(){d.swipedX?l.goTo(n.selected+d.directionX,s.speed,!0):"x"==d.direction&&l.goTo(n.selected,s.speed,!0)}),e.on("destroy."+o,function(){clearTimeout(r),e.css({overflow:""}),c.css({position:"",left:"",top:"",width:""}),i.stop(!0,!0).css({position:"","float":"",width:"",zIndex:"",opacity:"",visibility:"",left:""})})},scroll:function(e,i,s,n){function a(t,e){var i=-100*t+"%";n.hasTransforms3D&&n.hasTransitions?u.css({transform:"translate3d("+i+",0,0)",transition:"all "+e+"ms"}):u.animate({marginLeft:i},e)}var r=this,l=r.touchData,d=s.loop,c=1,u=i,h=0;if(d){var f=i.clone().prependTo(e),p=i.clone().appendTo(e);u=f.add(i).add(p),h=-i.length}var v=t("<div>").css({overflow:"hidden",visibility:"hidden",opacity:0}),g=t("<div>").css({width:100*i.length+"%"}),m=i.clone().css({width:Math.floor(100/i.length*100)/100+"%","float":"left"});e.prepend(v.append(g.append(m))),"static"==e.css("position")&&e.css("position","relative"),u.css({position:"absolute",top:0,width:"100%",height:"100%"}).each(function(e){t(this).css("left",100*(e+h)+"%")}),e.on("slidestart."+o,function(){var t=n.selected;if(outOfRange=!1,d){(n.selected-n.previous)*n.loopDirection<0&&(t+=n.total*n.loopDirection,outOfRange=!0);var e=n.total;outOfRange&&(e+=n.total*n.loopDirection),r._updateClasses(u,e)}a(t,n.speed)}).on("slideend."+o,function(){u.not(i.eq(n.selected)).css({transition:"none"}),d&&outOfRange&&(a(n.selected,0),r._updateClasses(u,n.total))}),n.isTouch&&e.on("touchstart."+o,function(){r.stop(),c=1}).on("touchmove."+o,function(t){if(t=t.originalEvent,"x"==l.direction){!d&&(n.selected<=0&&l.deltaX>0||n.selected>=n.total-1&&l.deltaX<0)&&(c=Math.abs(l.deltaX)/l.areaWidth+2);var e=n.selected+l.ratioX/-c;a(e,0),t.preventDefault()}}).on("touchend."+o,function(){l.swipedX?(n.loopDirection=l.directionX,r.goTo(n.selected+l.directionX,s.speed,!0)):"x"==l.direction&&a(n.selected,s.speed)}),e.on("destroy."+o,function(){f.add(p).remove(),e.css({position:""}),wrapper.stop(!0,!0).css({position:"",left:"",top:"",overflow:"",width:"",transform:"",transitionDuration:""}),i.css({"float":"",width:""})})}}}(jQuery,window);