/*! coolSlider v1.05 - http://github.com/romanmz/coolSlider */
(function(e,t,n){function s(){var e=document.createElement("p"),r,i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(var s in i){if(e.style[s]!==n){e.style[s]="translate3d(1px,1px,1px)";r=t.getComputedStyle(e).getPropertyValue(i[s])}}document.body.removeChild(e);return r!==n&&r.length>0&&r!=="none"}function o(){var e=document.createElement("p").style;var t="transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"OTransition"in e;return t}var r="coolSlider";var i={type:"fade",slides:"> *",timer:8e3,speed:500,showFirst:1,visualTimer:false,loop:false,autoplay:false,keyboard:true,swipe:"scroll",fixHeight:false,selectedSlideClass:"selected",previousSlideClass:"previous",controlsDisabledClass:"disabled",controlsPausedClass:"paused",controlsSelectedClass:"selected",addControls:true,controls:'<div class="coolSlider-controls"><h3>Slideshow controls</h3><p>Currently showing slide {{current}} of {{total}}</p/><ul>{{prevLink}}{{playLink}}{{pauseLink}}{{nextLink}}</ul><ol>{{navLinks}}</ol></div>',prevLink:'<li class="coolSlider-controls-prev"><a href="#">&laquo;<span class="default-text"> Previous slide</span><span class="alt-text"> Showing first slide</span></a></li>',nextLink:'<li class="coolSlider-controls-next"><a href="#"><span class="default-text">Next slide </span><span class="alt-text">Showing last slide </span>&raquo;</a></li>',playLink:'<li class="coolSlider-controls-play"><a href="#">▶<span> Play slideshow</span></a></li>',pauseLink:'<li class="coolSlider-controls-pause"><a href="#">■<span> Pause slideshow</span></a></li>',navLinks:'<li class="coolSlider-controls-number"><a href="#"><span class="default-text">Show slide </span><span class="alt-text">Showing slide </span>{{title}}</a></li>',init:function(){},slidestart:function(){},slideend:function(){},touchstart:function(){},touchmove:function(){},touchend:function(){},swipesuccess:function(){},swipefail:function(){}};var u=function(t,n){this.element=t;this.options=e.extend({},e.fn[r].defaults,n,t.data(r.toLowerCase()));this._init(t,this.options)};e.fn[r]=function(t){return this.each(function(){if(!e(this).data(r+"API")){e(this).data(r+"API",new u(e(this),t))}})};e.fn[r].defaults=i;u.prototype={_init:function(n,i){var u=this;var a;var f;var l;a=u.slides=n.find(i.slides);if(a.length<2){return}f=u.data={total:a.length,selected:-1,previous:-1,loopDir:0,moving:false,timerChange:false,timerTransition:false,forced:false,speed:i.speed,playing:i.autoplay,touch:"ontouchstart"in t||navigator.msMaxTouchPoints>0,selectedSlide:e(),previousSlide:e(),otherSlides:e(),visualTimer:i.visualTimer?e(i.visualTimer):e(),csstransforms3d:typeof Modernizr!="undefined"&&Modernizr.csstransforms3d||s(),csstransitions:typeof Modernizr!="undefined"&&Modernizr.csstransitions||o()};if(i.showFirst=="random"){i.showFirst=Math.ceil(Math.random()*f.total)}if(i.keyboard){e(document).on("keydown."+r,function(e){var t=e.which;if(t==37)u.showPrevious();else if(t==39)u.showNext()})}u.addTouchEvents();l=f.touch&&typeof i.swipe=="string"?i.swipe:i.type;if(typeof l==="string"&&typeof e.fn[r].transitions[l]==="function"){l=e.fn[r].transitions[l]}else if(typeof l!=="function"){e.error(r+"(): type of slider is not defined")}l.call(u,n,a,i,f);i.init.call(u,n,a,i,f);u.createControls();u.showSlide(i.showFirst-1,0);if(i.fixHeight){function c(){var t=0;a.height("").each(function(){t=Math.max(t,e(this).height())}).height(t)}c();setTimeout(c,500);e(t).on("load."+r,c);e(t).on("resize."+r,c);if(typeof e.fn.imagesLoaded=="function"){a.imagesLoaded().progress(c)}}},addTouchEvents:function(){var e=this,t=e.element,i=e.slides,s=e.options,o=e.data;var u=o.touchData={};if(!o.touch){return}t.on("touchstart."+r,function(r){var a=r.originalEvent.touches[0];u.startX=a.pageX;u.startY=a.pageY;u.startTime=+(new Date);u.deltaX=0;u.deltaY=0;u.resistance=1;u.isVertical=n;u.width=t.innerWidth();u.swipeX=0;s.touchstart.call(e,t,i,s,o)}).on("touchmove."+r,function(n){n=n.originalEvent;if(n.touches.length>1||n.scale&&n.scale!==1){return}u.deltaX=n.touches[0].pageX-u.startX;u.deltaY=n.touches[0].pageY-u.startY;if(typeof u.isVertical=="undefined"){u.isVertical=Math.abs(u.deltaX)<Math.abs(u.deltaY)}if(u.isVertical){return}if(o.selected<=0&&u.deltaX>0||o.selected>=o.total-1&&u.deltaX<0){u.resistance=Math.abs(u.deltaX)/u.width+2}u.swipeX=u.deltaX/u.width;n.preventDefault();s.touchmove.call(e,t,i,s,o)}).on("touchend."+r,function(n){if(u.isVertical){return}var a=+(new Date)-u.startTime<250;var f=Math.abs(u.deltaX)>20;var l=Math.abs(u.swipeX)>.5;if(l||a&&f){t.trigger("swipesuccess."+r);s.swipesuccess.call(e,t,i,s,o)}else{t.trigger("swipefail."+r);s.swipefail.call(e,t,i,s,o)}s.touchend.call(e,t,i,s,o)})},createControls:function(){if(this.controls||!this.options.addControls){return}var t=this,n=t.options,i=t.data;var s={controls:"",prevLink:"",nextLink:"",playLink:"",pauseLink:"",navLinks:""};var o;var u;for(var a in s){var f=typeof n[a]=="string"?n[a]:"";s[a]=f.replace(/\{\{([^}]+)\}\}/g,'<span data-replace-with="$1">$1</span>')}t.controls=o=e(s.controls);switch(n.addControls){case true:n.addControls="before";case"before":case"after":case"prepend":case"append":t.element[n.addControls](o);break;default:e(n.addControls).append(o);break}for(var a in s){switch(a){case"prevLink":case"nextLink":case"playLink":case"pauseLink":o[a]=e(s[a]);var l=o.filter('[data-replace-with="'+a+'"]');if(!l.length){l=o.find('[data-replace-with="'+a+'"]')}l.replaceWith(o[a]);break}}if(!i.playing){o.playLink.addClass(n.controlsPausedClass);o.pauseLink.addClass(n.controlsPausedClass)}u=e();for(var c=1;c<=i.total;c++){var h=e(s["navLinks"]);var p=t.slides.eq(c-1).data("slide-title");if(!p)p=c;h.find("[data-replace-with=title]").text(p).contents().unwrap();h.find("[data-replace-with=number]").text(c).contents().unwrap();u=u.add(h)}o.find('[data-replace-with="navLinks"]').replaceWith(u);o.navLinks=u;t.element.on("slidestart."+r,function(){t.updateControls()});var d=o.prevLink.find("a").length?o.prevLink.find("a"):o.prevLink;d.on("click."+r,function(){t.showPrevious();return false});var v=o.nextLink.find("a").length?o.nextLink.find("a"):o.nextLink;v.on("click."+r,function(){t.showNext();return false});var m=o.playLink.find("a").length?o.playLink.find("a"):o.playLink;m.on("click."+r,function(){t.playSlides();return false});var g=o.pauseLink.find("a").length?o.pauseLink.find("a"):o.pauseLink;g.on("click."+r,function(){t.stopSlides();return false});var u=o.navLinks.find("a").length?o.navLinks.find("a"):o.navLinks;u.on("click."+r,function(){i.loopDir=0;t.showSlide(t.controls.navLinks.children("a").index(e(this)));return false})},updateControls:function(){var e=this,t=e.data,n=e.options,r=e.controls;var i=n.loop||t.selected>0?"removeClass":"addClass";r.prevLink[i](n.controlsDisabledClass);var s=n.loop||t.selected<t.total-1?"removeClass":"addClass";r.nextLink[s](n.controlsDisabledClass);r.navLinks.removeClass(n.controlsSelectedClass).eq(t.selected).addClass(n.controlsSelectedClass);r.find("[data-replace-with=current]").text(t.selected+1);r.find("[data-replace-with=total]").text(t.total)},showSlide:function(t,n){var i=this,s=i.element,o=i.slides,u=i.data,a=i.options;var f=a.loop;var l=u.total-1;if(typeof n==="undefined")n=a.speed;t=t>l?f?0:l:t<0?f?l:0:t;if(!u.forced&&(u.moving||t==u.selected)){return}u.forced=false;u.moving=true;u.previous=u.selected;u.selected=t;u.speed=n;if(u.loopDir==0){u.loopDir=u.selected-u.previous>0?1:-1}u.selectedSlide=o.eq(u.selected);u.previousSlide=u.previous>=0?o.eq(u.previous).not(u.selectedSlide):e();u.otherSlides=o.not(u.selectedSlide).not(u.previousSlide);clearTimeout(u.timerChange);clearTimeout(u.timerTransition);o.removeClass(a.selectedSlideClass+" "+a.previousSlideClass);u.selectedSlide.addClass(a.selectedSlideClass);u.previousSlide.addClass(a.previousSlideClass);u.visualTimer.stop(true,false).animate({width:0,marginLeft:"100%"},{duration:u.speed});s.trigger("slidestart."+r);a.slidestart.call(i,s,o,a,u);u.timerTransition=setTimeout(function(){u.moving=false;if(u.playing){i.playSlides()}u.previousSlide.removeClass(a.previousSlideClass);s.trigger("slideend."+r);a.slideend.call(i,s,o,a,u)},u.speed)},showPrevious:function(){this.data.loopDir=-1;this.showSlide(this.data.selected-1)},showNext:function(){this.data.loopDir=1;this.showSlide(this.data.selected+1)},stopSlides:function(){var e=this,t=e.data,n=e.controls,r=e.options;if(n){n.playLink.addClass(r.controlsPausedClass);n.pauseLink.addClass(r.controlsPausedClass)}t.playing=false;t.forced=true;e.showSlide(t.selected,0)},playSlides:function(){var e=this,t=e.data,n=e.controls,r=e.options;if(n){n.playLink.removeClass(r.controlsPausedClass);n.pauseLink.removeClass(r.controlsPausedClass)}t.playing=true;t.visualTimer.stop(true,false).css({marginLeft:0}).animate({width:"100%"},{duration:r.timer});clearTimeout(t.timerChange);t.timerChange=setTimeout(function(){next=t.selected+1>t.total-1?0:t.selected+1;e.data.loopDir=1;e.showSlide(next)},r.timer)},createContainer:function(){var t=this.slides.parent();if(t.is(this.element)||t.length>1){t=e("<div>").appendTo(this.element).append(this.slides)}this.container=t;return this.container}};e.fn[r].transitions={fade:function(t,n,i,s){var o=this.createContainer();var u=100/s.total;t.css({overflow:"hidden"});o.css({position:"relative",left:0,top:0,width:s.total*100+"%"});n.css({position:"relative","float":"left",width:u+"%",zIndex:0,opacity:0,visibility:"hidden"}).each(function(t,n){e(this).css({left:u*-t+"%"})});t.on("slidestart."+r,function(){s.selectedSlide.css({zIndex:1,visibility:"visible"}).fadeTo(s.speed,1);setTimeout(function(){s.previousSlide.fadeTo(s.speed/2,0)},s.speed/2)}).on("slideend."+r,function(){s.selectedSlide.css({zIndex:0});s.previousSlide.css({visibility:"hidden"})})},scroll:function(e,t,n,i){function v(e,t){var n;if(i.csstransforms3d&&i.csstransitions){n=e/a*-100+"%";var r=l?"translate3d("+n+",0,0)":"translateX("+n+")";o.css({transform:r,"transition-duration":t+"ms"})}else{n=e*-100+"%";o.animate({left:n},{duration:t})}}var s=this;var o=s.createContainer();var u=t;var a=u.length;var f=false;var l=n.swipe&&i.touch;var c=n.loop&&!l;var h=i.touchData;if(c){var p=t.clone().prependTo(o);var d=t.clone().appendTo(o);u=u.add(p).add(d);a=u.length}if(e.css("position")=="static"){e.css("position","relative")}o.css({position:"relative",left:0,top:0,width:a*100+"%"});u.css({"float":"left",width:100/a+"%"});e.on("slidestart."+r,function(){var e=i.selected;f=false;if(c){e+=i.total;if((i.selected-i.previous)*i.loopDir<0){e+=i.total*i.loopDir;f=true}}v(e,i.speed)}).on("slideend."+r,function(){if(c&&f){var e=i.selected+i.total;v(e,0)}});if(l){e.on("touchstart."+r,function(){s.stopSlides()}).on("touchmove."+r,function(){if(!h.isVertical){var e=i.selected+h.swipeX/-h.resistance;v(e,0)}}).on("swipesuccess."+r,function(){var e=h.deltaX<0?1:-1;i.forced=true;s.showSlide(i.selected+e,n.speed)}).on("swipefail."+r,function(){v(i.selected,n.speed)})}}}})(jQuery,window)